# üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å–±–æ—Ä–∫–∏ Docker

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ —Å–±–æ—Ä–∫–µ Docker –æ–±—Ä–∞–∑–∞ –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞:
```
ERROR  ‚úó Build failed in 828ms
[nuxi]  ERROR  Nuxt Build Error: [@tailwindcss/vite:generate:build] Can't resolve 'tailwindcss' in '/app/app/assets/css'
```

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤ —Ç–æ–º, —á—Ç–æ:
1. –ù–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª–∏—Å—å build tools –¥–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –Ω–∞—Ç–∏–≤–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, `@tailwindcss/oxide`)
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è —Ñ–ª–∞–≥ `--prod=false` –≤–º–µ—Å—Ç–æ –ø—Ä–æ—Å—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
3. –ù–µ —Ö–≤–∞—Ç–∞–ª–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫

## üöÄ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π Dockerfile

### –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

1. **–î–æ–±–∞–≤–ª–µ–Ω—ã build tools:**
```dockerfile
RUN apk add --no-cache libc6-compat python3 make g++
```

2. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
```dockerfile
# –ë—ã–ª–æ:
RUN pnpm install --frozen-lockfile --prod=false

# –°—Ç–∞–ª–æ:
RUN pnpm install --frozen-lockfile
```

3. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —á–∏—Å—Ç—ã–π alpine –æ–±—Ä–∞–∑ –±–µ–∑ build tools
- –¢–æ–ª—å–∫–æ runtime –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (libc6-compat)
- –ö–æ–ø–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å–æ–±—Ä–∞–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (.output)

## üì¶ –î–æ—Å—Ç—É–ø–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ Dockerfile

### 1. `Dockerfile` - –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –≤–µ—Ä—Å–∏—è
–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
```bash
docker-compose build
```

### 2. `Dockerfile.optimized` - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç pnpm fetch –¥–ª—è –ª—É—á—à–µ–≥–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è:
```bash
docker build -f Dockerfile.optimized -t shedule_smtu:optimized .
```

## üî® –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Å–±–æ—Ä–∫–∏

### –ß–∏—Å—Ç–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞:
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose down

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –±–µ–∑ –∫—ç—à–∞
docker-compose build --no-cache

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose up -d
```

### –ë—ã—Å—Ç—Ä–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞:
```bash
docker-compose up -d --build
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏:
```bash
docker-compose up --build
```

## üêõ –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –≤—Å–µ –µ—â–µ –µ—Å—Ç—å

### 1. –û—á–∏—Å—Ç–∏—Ç—å –≤–µ—Å—å Docker –∫—ç—à:
```bash
docker system prune -a --volumes
docker-compose build --no-cache
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏–∏:
```bash
docker --version
docker-compose --version
node --version
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å package.json –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
cd Frontend
pnpm install
pnpm run build
```

–ï—Å–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ —Å–±–æ—Ä–∫–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ, —Ç–æ Docker —Ç–æ–∂–µ –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å.

### 4. –£–≤–µ–ª–∏—á–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã Docker:
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Docker –∏–º–µ–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä–µ—Å—É—Ä—Å–æ–≤:
- RAM: –º–∏–Ω–∏–º—É–º 4GB
- Disk: –º–∏–Ω–∏–º—É–º 20GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞

## üìä –†–∞–∑–º–µ—Ä—ã –æ–±—Ä–∞–∑–æ–≤

–ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- Base image (node:20-alpine): ~170MB
- –° –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –¥–ª—è —Å–±–æ—Ä–∫–∏: ~800MB (builder stage)
- –§–∏–Ω–∞–ª—å–Ω—ã–π production –æ–±—Ä–∞–∑: ~200-300MB

## üîç –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–∫–æ–π —ç—Ç–∞–ø –ø–∞–¥–∞–µ—Ç:
```bash
docker build -f Dockerfile --target deps -t test-deps .
docker build -f Dockerfile --target builder -t test-builder .
docker build -f Dockerfile --target runner -t test-runner .
```

### –í–æ–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:
```bash
docker run -it --rm test-builder sh
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
docker run -it --rm test-deps sh -c "ls -la node_modules/@nuxt"
```

## ‚ú® –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### BuildKit –¥–ª—è –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä–æ–π —Å–±–æ—Ä–∫–∏:
```bash
DOCKER_BUILDKIT=1 docker-compose build
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ .dockerignore:
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `.dockerignore` –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –Ω–µ–Ω—É–∂–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤.

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ª–æ–µ–≤:
–ü–æ—Ä—è–¥–æ–∫ –∫–æ–º–∞–Ω–¥ –≤ Dockerfile –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫—ç—à–∞ Docker.

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Nuxt Deployment Guide](https://nuxt.com/docs/getting-started/deployment)
- [Docker Multi-stage Builds](https://docs.docker.com/build/building/multi-stage/)
- [PNPM in Docker](https://pnpm.io/docker)
- [Alpine Linux Packages](https://pkgs.alpinelinux.org/packages)

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ BuildKit** –¥–ª—è –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä–æ–π —Å–±–æ—Ä–∫–∏
2. **–†–µ–≥—É–ª—è—Ä–Ω–æ —á–∏—Å—Ç–∏—Ç–µ** Docker –∫—ç—à –¥–ª—è –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –º–µ—Å—Ç–∞
3. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä** —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ–±—Ä–∞–∑–∞
4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ .dockerignore** –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –Ω–µ–Ω—É–∂–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
5. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ** –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä

